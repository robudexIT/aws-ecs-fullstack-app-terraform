(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d38fb4f0"],{"0516":function(t,e,a){"use strict";a("1845")},1845:function(t,e,a){},3151:function(t,e,a){"use strict";var s=a("7a23");const l=["id"],o={class:"modal-dialog"},c={class:"modal-content"},n={class:"modal-header"},r={class:"modal-title"},i={class:"modal-body"},d=["method","id"],m={class:"mb-3"},u=Object(s["h"])("label",{for:"Add Tag",class:"mb-3"},"Add Comment",-1),b=["value"],h={key:0,class:"mb-3"},g=Object(s["h"])("label",{for:"TagType",class:"mb-2"},"Select Tag:",-1),O=["value"],j=["value"],p=Object(s["h"])("hr",null,null,-1),C=Object(s["h"])("div",{class:"row justify-content-end"},[Object(s["h"])("div",{class:"col-5"},[Object(s["h"])("button",{type:"button ",class:"btn btn-primary ml-auto m-1","data-bs-dismiss":"modal",id:"addbtn"},"Submit"),Object(s["h"])("button",{type:"button",class:"btn btn-danger ml-auto","data-bs-dismiss":"modal"},"Close")])],-1);function f(t,e,a,f,_,y){return Object(s["C"])(),Object(s["g"])("div",{class:"modal fade",id:a.modalId,role:"dialog"},[Object(s["h"])("div",o,[Object(s["h"])("div",c,[Object(s["h"])("div",n,[Object(s["h"])("h4",r,Object(s["N"])(a.modalTitle),1)]),Object(s["h"])("div",i,[Object(s["h"])("form",{method:a.formMethod,id:a.formId,onSubmit:e[2]||(e[2]=Object(s["X"])((...t)=>y.submitFromData&&y.submitFromData(...t),["prevent"]))},["commentTag"==a.formId&&"modalCommentTag"==a.modalId?(Object(s["C"])(),Object(s["g"])(s["a"],{key:0},[Object(s["h"])("div",m,[u,Object(s["h"])("textarea",{class:"form-control",cols:"62",placeholder:"Put Your Comment Here.",value:a.currentComment,onInput:e[0]||(e[0]=(...t)=>y.setNewComment&&y.setNewComment(...t))},null,40,b)]),"tagandcomment"==a.mode?(Object(s["C"])(),Object(s["g"])("div",h,[g,Object(s["h"])("select",{class:"form-select",value:a.currentTag,onChange:e[1]||(e[1]=(...t)=>y.setNewTag&&y.setNewTag(...t))},[(Object(s["C"])(!0),Object(s["g"])(s["a"],null,Object(s["I"])(a.tags,t=>(Object(s["C"])(),Object(s["g"])("option",{key:t,value:t},Object(s["N"])(t),9,j))),128))],40,O)])):Object(s["f"])("",!0)],64)):Object(s["f"])("",!0),p,C],40,d)])])])],8,l)}var _={props:["modalId","modalTitle","formId","formMethod","mode","tags","currentComment","currentTag","callDetails"],data(){return{newTag:null,newComment:null,formIsValid:!0}},methods:{setNewTag(t){this.newTag=t.target.value},setNewComment(t){this.newComment=t.target.value},formValidation(){return this.formIsValid},submitFromData(){if(console.log("test"),!this.formValidation())return;const t=this.$store.getters["getLoggedinUserData"].name,e={};e.starttimestamp=this.callDetails.starttimestamp,e.getdate=this.callDetails.getDate,e.whoansweredcall=this.callDetails.extension,e.caller=this.callDetails.Caller,e.commentby=t,null!=this.newComment?(e.comment=this.newComment,this.newComment=null):(e.comment=this.currentComment,this.newComment=null),"tagandcomment"==this.mode&&(null!=this.newTag?(e.tag=this.newTag,this.newTag=null):e.tag=this.currentTag),this.$emit("emittedData",e)}},created(){}},y=a("6b0d"),D=a.n(y);const v=D()(_,[["render",f]]);e["a"]=v},6109:function(t,e,a){},a398:function(t,e,a){"use strict";a.r(e);var s=a("7a23");const l=Object(s["h"])("p",null,"Fetching Data From the Database Please Wait....",-1),o={class:"text-center font-weight-bold text-primary"},c=Object(s["h"])("span",{class:"text-danger"}," MISSED-CALLS DETAILS ",-1),n={key:1};function r(t,e,a,r,i,d){const m=Object(s["K"])("base-dialog"),u=Object(s["K"])("base-spinner"),b=Object(s["K"])("base-container"),h=Object(s["K"])("missed-calls-details-data-list"),g=Object(s["K"])("base-table"),O=Object(s["K"])("the-pagination");return Object(s["C"])(),Object(s["g"])(s["a"],null,[Object(s["l"])(m,{show:!!i.error,onClose:d.handleError},{default:Object(s["U"])(()=>[Object(s["h"])("p",null,Object(s["N"])(i.error),1)]),_:1},8,["show","onClose"]),i.isLoading?(Object(s["C"])(),Object(s["e"])(m,{key:0,show:i.isLoading},{default:Object(s["U"])(()=>[Object(s["l"])(u,null,{default:Object(s["U"])(()=>[l]),_:1})]),_:1},8,["show"])):(Object(s["C"])(),Object(s["g"])(s["a"],{key:1},[Object(s["l"])(b,null,{default:Object(s["U"])(()=>[Object(s["h"])("h2",o,[c,Object(s["h"])("button",{class:"btn btn-secondary btn-sm",onClick:e[0]||(e[0]=(...t)=>d.exportMissedCallsDetails&&d.exportMissedCallsDetails(...t))}," EXPORT ")])]),_:1}),Object(s["l"])(g,{theader:"detailedmissedcalls",tableclass:"cdr",onEmittedData:d.searchResult},{default:Object(s["U"])(()=>[0!==d.missedCallsDetais.length?(Object(s["C"])(),Object(s["e"])(h,{key:0,tdata:d.missedCallsDetais,onEmittedData:d.putCommentTag,onEmittedCustomerData:d.setCustomerinfo},null,8,["tdata","onEmittedData","onEmittedCustomerData"])):(Object(s["C"])(),Object(s["g"])("p",n,"Result Not Found"))]),_:1},8,["onEmittedData"]),0!==d.missedCallsDetais.length?(Object(s["C"])(),Object(s["e"])(O,{key:0,numberOfPages:d.getTotalPages(),onEmittedData:d.getCurrentPage},null,8,["numberOfPages","onEmittedData"])):Object(s["f"])("",!0)],64))],64)}const i=["onClick"],d=["onClick"],m=["data-bs-target","onClick"],u=["data-bs-target","onClick"];function b(t,e,a,l,o,c){const n=Object(s["K"])("cdr-modal-form"),r=Object(s["K"])("customer-modal-form");return Object(s["C"])(),Object(s["g"])(s["a"],null,[(Object(s["C"])(!0),Object(s["g"])(s["a"],null,Object(s["I"])(a.tdata,(t,e)=>(Object(s["C"])(),Object(s["g"])("tr",{key:e},[Object(s["h"])("td",null,Object(s["N"])(e+1),1),Object(s["h"])("td",null,Object(s["N"])(t.starttime),1),Object(s["h"])("td",null,Object(s["N"])(t.endtime),1),Object(s["h"])("td",null,[1==t.isRegistered?(Object(s["C"])(),Object(s["g"])("button",{key:0,class:"btn btn-info btn-sm text-justify text-white",type:"button","data-bs-toggle":"modal","data-bs-target":"#customerModalFormId","dataset-backdrop":"static","dataset-keyboard":"false",onClick:e=>c.getCallsDetails(t)},Object(s["N"])(t.Caller),9,i)):(Object(s["C"])(),Object(s["g"])("button",{key:1,class:"btn btn-outline-info btn-sm text-justify",type:"button","data-bs-toggle":"modal","data-bs-target":"#customerModalFormId","dataset-backdrop":"static","dataset-keyboard":"false",onClick:e=>c.getCallsDetails(t)},Object(s["N"])(t.Caller),9,d))]),Object(s["h"])("td",null,Object(s["N"])(t.CallStatus),1),Object(s["h"])("td",null,[""!=t.comment?(Object(s["C"])(),Object(s["g"])("button",{key:0,type:"button",class:"btn btn-info btn-sm text-justify text-white","data-bs-toggle":"modal","data-bs-target":o.dataBsTarget,"dataset-backdrop":"static","dataset-keyboard":"false",onClick:e=>c.getCallsDetails(t)},Object(s["N"])(c.limitCommentTitle(t.comment)),9,m)):(Object(s["C"])(),Object(s["g"])("button",{key:1,class:"btn btn-outline-info btn-sm text-justify",type:"button","data-bs-toggle":"modal","data-bs-target":o.dataBsTarget,"dataset-backdrop":"static","dataset-keyboard":"false",id:"comment_tag",onClick:e=>c.getCallsDetails(t)},"No Comment",8,u))]),Object(s["h"])("td",null,Object(s["N"])(t.commentby),1),Object(s["h"])("td",null,Object(s["N"])(t.getdate),1)]))),128)),(Object(s["C"])(),Object(s["e"])(s["b"],{to:"body"},[Object(s["l"])(n,{modalId:"modalCommentTag",modalTitle:"Add Comment",formId:"commentTag",formMethod:"POST",mode:"commentonly",callDetails:o.callDetails,currentComment:o.comment,tag:t.tag,onEmittedData:c.putCommentTag},null,8,["callDetails","currentComment","tag","onEmittedData"])])),Object(s["l"])(r,{customer_id:o.customer_id,customer_number:o.customer_number,customer_name:o.customer_name,updated_by:o.updated_by,calltype:"missedcallsdetails",onEmittedCustomerData:c.setCustomerinfo},null,8,["customer_id","customer_number","customer_name","updated_by","onEmittedCustomerData"])],64)}a("13d5");var h=a("3151"),g=a("b4a5"),O={props:["tdata"],components:{CdrModalForm:h["a"],CustomerModalForm:g["a"]},data(){return{dataBsTarget:"#modalCommentTag",comment:null,callDetails:null,customer_id:null,customer_name:null,customer_number:null,updated_by:null}},methods:{limitCommentTitle(t,e=30){var a=[];return t.length>e?(t.split(" ").reduce((t,s)=>(t+s.length<=e&&a.push(s),t+s.length),0),a.join(" ")+" ..."):t},getCallsDetails(t){this.comment=t.comment,this.callDetails=t,this.customer_id=t.customer_id,this.customer_number=t.customer_number,this.customer_name=t.customer_name,this.updated_by=t.updated_by},putCommentTag(t){this.$emit("emittedData",t)},setCustomerinfo(t){this.$emit("emittedCustomerData",t)}},computed:{buttonText(t){return""==t.comment?"No Comment":t.comment}},created(){console.log(this.tdata)}},j=a("6b0d"),p=a.n(j);const C=p()(O,[["render",b]]);var f=C,_=a("fb3e"),y={emits:["emittedData"],components:{MissedCallsDetailsDataList:f,ThePagination:_["a"]},data(){return{error:null,isLoading:!1,numberPerPage:5,currentItemList:null,currentPage:1,currentTags:[],trimStart:0,trimEnd:5,appName:this.$store.getters.getAppName}},methods:{searchResult(t,e,a){this.$router.push({path:this.$route.path,query:{startdate:t,enddate:e,tagname:a}})},async fetcthMissedCallsDetails(){try{let t="&option=details",e=window.location.search.substring(1)+t;this.isLoading=!0,await this.$store.dispatch("agentcdr/fetchMissedCallsDetails",{querystring:e}),this.isLoading=!1}catch(t){this.error=t.message,this.isLoading=!1}},putCommentTag(t){try{this.$store.dispatch("agentcdr/putCommentTag",{data:t,calltype:"missedcalls"})}catch(e){this.error=e.message}},getTotalPages(){let t=this.$store.getters["agentcdr/getMissedCallsDetails"];return Math.ceil(t.length/this.numberPerPage)},getCurrentPage(t){t=parseInt(t),this.currentPage=t,this.trimStart=(this.currentPage-1)*this.numberPerPage,this.trimEnd=this.trimStart+this.numberPerPage},exportMissedCallsDetails(){let t;t=this.$store.getters["agentcdr/getMissedCallsDetailsExport"],window.Jhxlsx.export(t.tableData,t.options)},setCustomerinfo(t){console.log("from calldetails"),console.log(t);try{""==t.customer_id_old_state||""==t.customer_name_old_state?(this.$store.dispatch("agentcdr/insertCustomerInfo",{data:t}),this.fetcthMissedCallsDetails()):(this.$store.dispatch("agentcdr/updateCustomerInfo",{data:t}),this.fetcthMissedCallsDetails())}catch(e){alert(e.message)}},handleError(){this.error=null}},computed:{missedCallsDetais(){let t=this.$store.getters["agentcdr/getMissedCallsDetails"];return 0==t.length?[]:t.slice(this.trimStart,this.trimEnd)},getAutoLogoutStatus(){return this.$store.getters["getAutoLogoutStatus"]}},created(){this.$store.dispatch("checkIfCurrentLogin"),this.fetcthMissedCallsDetails()},watch:{$route(){this.fetcthMissedCallsDetails()},getAutoLogoutStatus(t,e){t&&t!==e&&this.$router.replace("/"+this.appName+"/login")}}};const D=p()(y,[["render",r]]);e["default"]=D},b4a5:function(t,e,a){"use strict";var s=a("7a23");const l=t=>(Object(s["F"])("data-v-43652ac8"),t=t(),Object(s["D"])(),t),o={class:"modal fade",id:"customerModalFormId",role:"dialog"},c={class:"modal-dialog"},n={class:"modal-content"},r=l(()=>Object(s["h"])("div",{class:"modal-header"},[Object(s["h"])("h4",{class:"modal-title"},"Customer Details")],-1)),i={class:"modal-body"},d={key:0,class:"errorP"},m={key:1},u=Object(s["k"])("Updated By: "),b={style:{"font-weight":"bold",color:"blue"}},h={class:"form-group"},g=l(()=>Object(s["h"])("label",{for:"customerNumber"},"Customer Number:",-1)),O=["value"],j=["value"],p={class:"form-group"},C=l(()=>Object(s["h"])("label",{for:"customerID"},"Customer ID:",-1)),f={class:"form-group"},_=l(()=>Object(s["h"])("label",{for:"customerName"},"Customer Name:",-1)),y=l(()=>Object(s["h"])("hr",null,null,-1)),D={class:"row justify-content-end"},v={key:0,class:"col-5"},w=l(()=>Object(s["h"])("button",{type:"button ",class:"btn btn-primary ml-auto m-1","data-bs-dismiss":"modal",id:"addbtn"},"Submit",-1)),P=l(()=>Object(s["h"])("button",{type:"button",class:"btn btn-danger ml-auto","data-bs-dismiss":"modal"},"Close",-1)),k=[w,P];function T(t,e,a,l,w,P){return Object(s["C"])(),Object(s["g"])("div",o,[Object(s["h"])("div",c,[Object(s["h"])("div",n,[r,Object(s["h"])("div",i,[Object(s["h"])("form",{method:"POST",id:"customer_form_id",onSubmit:e[4]||(e[4]=Object(s["X"])((...t)=>P.submitFromData&&P.submitFromData(...t),["prevent"]))},[Object(s["h"])("div",{class:Object(s["v"])(P.errorDiv)},[t.formIsValid?Object(s["f"])("",!0):(Object(s["C"])(),Object(s["g"])("p",d,"Please Make Sure That Dont Leave Blank on the Input Fields")),""!=a.customer_id&&""!=a.customer_name?(Object(s["C"])(),Object(s["g"])("p",m,[u,Object(s["h"])("span",b,Object(s["N"])(a.updated_by),1)])):Object(s["f"])("",!0),Object(s["h"])("div",h,[g,"csdinbounddetails"==a.calltype||"missedcallsdetails"==a.calltype||"csdoutbounddetails"==a.calltype||"collectiondetails"==a.calltype?(Object(s["C"])(),Object(s["g"])("input",{key:0,type:"text",class:"form-control",id:"customerNumber",placeholder:"Enter Customer Number",value:a.customer_number,disabled:""},null,8,O)):(Object(s["C"])(),Object(s["g"])("input",{key:1,type:"text",class:"form-control",id:"customerNumber",placeholder:"NOT YET REGISTER",value:a.customer_number,disabled:""},null,8,j))]),Object(s["h"])("div",p,[C,"csdinbounddetails"==a.calltype||"missedcallsdetails"==a.calltype||"csdoutbounddetails"==a.calltype||"collectiondetails"==a.calltype?Object(s["V"])((Object(s["C"])(),Object(s["g"])("input",{key:0,type:"text",class:"form-control",id:"customerID",placeholder:"Enter Customer ID","onUpdate:modelValue":e[0]||(e[0]=e=>t.new_customer_id=e)},null,512)),[[s["S"],t.new_customer_id]]):Object(s["V"])((Object(s["C"])(),Object(s["g"])("input",{key:1,type:"text",class:"form-control",id:"customerID",placeholder:"NOT YET REGISTER","onUpdate:modelValue":e[1]||(e[1]=e=>t.new_customer_id=e),disabled:""},null,512)),[[s["S"],t.new_customer_id]])]),Object(s["h"])("div",f,[_,"csdinbounddetails"==a.calltype||"missedcallsdetails"==a.calltype||"csdoutbounddetails"==a.calltype||"collectiondetails"==a.calltype?Object(s["V"])((Object(s["C"])(),Object(s["g"])("input",{key:0,type:"text",class:"form-control",id:"customerName",placeholder:"Enter Customer Name","onUpdate:modelValue":e[2]||(e[2]=e=>t.new_customer_name=e)},null,512)),[[s["S"],t.new_customer_name]]):Object(s["V"])((Object(s["C"])(),Object(s["g"])("input",{key:1,type:"text",class:"form-control",id:"customerName",placeholder:"NOT YET REGISTER","onUpdate:modelValue":e[3]||(e[3]=e=>t.new_customer_name=e),disabled:""},null,512)),[[s["S"],t.new_customer_name]])]),y,Object(s["h"])("div",D,["csdinbounddetails"==a.calltype||"missedcallsdetails"==a.calltype||"csdoutbounddetails"==a.calltype||"collectiondetails"==a.calltype?(Object(s["C"])(),Object(s["g"])("div",v,k)):Object(s["f"])("",!0)])],2)],32)])])])])}var N={props:["customer_id","customer_number","customer_name","updated_by","calltype"],data:function(){return{new_customer_id:null,new_customer_name:null,formIsValid:!0}},methods:{setNewCustomerName(t){this.new_customer_name=t.target.value},setNewCustomerId(t){this.new_customer_id=t.target.value},formValidation(){return null!=this.new_customer_id&&null!=this.new_customer_name&&""!=this.new_customer_id&&""!=this.new_customer_name||(alert("Blank Fields are not allowed"),this.formIsValid=!1),this.formIsValid},submitFromData(){if(!this.formValidation())return void(this.formIsValid=!0);const t=this.$store.getters["getLoggedinUserData"].name,e={};e.updated_by=t,e.customer_number=this.customer_number,e.customer_id=this.new_customer_id,e.customer_name=this.new_customer_name,e.customer_id_old_state=this.customer_id,e.customer_name_old_state=this.customer_name,this.$emit("emittedCustomerData",e)}},computed:{errorDiv(){return this.formIsValid?"":"errorDiv"}},created(){},mounted(){},watch:{customer_id(){this.new_customer_id=this.customer_id},customer_name(){this.new_customer_name=this.customer_name}}},I=(a("0516"),a("6b0d")),E=a.n(I);const x=E()(N,[["render",T],["__scopeId","data-v-43652ac8"]]);e["a"]=x},e5e1:function(t,e,a){"use strict";a("6109")},fb3e:function(t,e,a){"use strict";var s=a("7a23");const l=t=>(Object(s["F"])("data-v-0316f01a"),t=t(),Object(s["D"])(),t),o={class:"row justify-content-center"},c=l(()=>Object(s["h"])("div",{class:"col-4"},null,-1)),n={key:0,class:"col-4 mb-3"},r={key:1,class:"col-4 align-self-center mb-3"},i=["disabled"],d=["id"],m=["disabled"],u=l(()=>Object(s["h"])("div",{class:"col-4"},null,-1));function b(t,e,a,l,b,h){const g=Object(s["K"])("base-container");return Object(s["C"])(),Object(s["e"])(g,null,{default:Object(s["U"])(()=>[Object(s["h"])("div",o,[c,2==a.numberOfPages?(Object(s["C"])(),Object(s["g"])("div",n,[Object(s["h"])("button",{onClick:e[0]||(e[0]=(...t)=>h.getCurrentPage&&h.getCurrentPage(...t)),id:"1",class:Object(s["v"])({activebtn:b.activePage})},"1",2),Object(s["h"])("button",{onClick:e[1]||(e[1]=(...t)=>h.getCurrentPage&&h.getCurrentPage(...t)),id:"2",class:Object(s["v"])({activebtn:!b.activePage})},"2",2)])):(Object(s["C"])(),Object(s["g"])("div",r,[Object(s["h"])("button",{disabled:h.disabledPrevBtn,onClick:e[2]||(e[2]=(...t)=>h.prevbtn&&h.prevbtn(...t)),class:"btn btn-outline-primary me-1"}," <<prev("+Object(s["N"])(b.currentPage-1)+") ",9,i),Object(s["h"])("button",{onClick:e[3]||(e[3]=(...t)=>h.getCurrentPage&&h.getCurrentPage(...t)),id:b.currentPage,class:"btn btn-success"},Object(s["N"])(b.currentPage),9,d),Object(s["h"])("button",{disabled:h.disabledNextBtn,onClick:e[4]||(e[4]=(...t)=>h.nextbtn&&h.nextbtn(...t)),class:"btn btn-outline-primary ms-1"},"next ("+Object(s["N"])(b.currentPage+1)+")>>",9,m)])),u])]),_:1})}var h=a("5fc3"),g={components:{BaseContainer:h["a"]},props:["numberOfPages"],data(){return{numberPerPage:5,currentPage:1,activePage:!0}},methods:{getCurrentPage(t){this.activePage=!this.activePage,this.$emit("emittedData",t.target.id)},nextbtn(){this.currentPage++,this.$emit("emittedData",this.currentPage)},prevbtn(){this.currentPage--,this.$emit("emittedData",this.currentPage)}},computed:{disabledPrevBtn(){return 1==this.currentPage?"disabled":0},disabledNextBtn(){return this.currentPage>=parseInt(this.numberOfPages)?"disabled":0}}},O=(a("e5e1"),a("6b0d")),j=a.n(O);const p=j()(g,[["render",b],["__scopeId","data-v-0316f01a"]]);e["a"]=p}}]);
//# sourceMappingURL=chunk-d38fb4f0.6ed34308.js.map